<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>4. Forth Words</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="durexForth: Operators Manual" /><link rel="up" href="index.html" title="durexForth: Operators Manual" /><link rel="prev" href="ar01s03.html" title="3. Editor" /><link rel="next" href="ar01s05.html" title="5. Configuring durexForth" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="ar01s03.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ar01s05.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="_forth_words"></a>4. Forth Words</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stack_manipulation"></a>4.1. Stack Manipulation</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15058798176" class="indexterm"></a>drop <span class="emphasis"><em>( a — )</em></span> 
</span></dt><dd>
Drop top of stack.
</dd><dt><span class="term">
<a id="idp15058800848" class="indexterm"></a>dup <span class="emphasis"><em>( a — a a )</em></span> 
</span></dt><dd>
Duplicate top of stack.
</dd><dt><span class="term">
<a id="idp15058803520" class="indexterm"></a>swap <span class="emphasis"><em>( a b — b a )</em></span> 
</span></dt><dd>
Swap top stack elements.
</dd><dt><span class="term">
<a id="idp15058806192" class="indexterm"></a>over <span class="emphasis"><em>( a b — a b a )</em></span> 
</span></dt><dd>
Make a copy of the second item and push it on top.
</dd><dt><span class="term">
<a id="idp15058808992" class="indexterm"></a>rot <span class="emphasis"><em>( a b c — b c a )</em></span> 
</span></dt><dd>
Rotate the third item to the top.
</dd><dt><span class="term">
<a id="idp15058811824" class="indexterm"></a>-rot <span class="emphasis"><em>( a b c — c a b )</em></span> 
</span></dt><dd>
rot rot
</dd><dt><span class="term">
<a id="idp15058814576" class="indexterm"></a>2drop <span class="emphasis"><em>( a b — )</em></span> 
</span></dt><dd>
Drop two topmost stack elements.
</dd><dt><span class="term">
<a id="idp15058817328" class="indexterm"></a>2dup <span class="emphasis"><em>( a b — a b a b )</em></span> 
</span></dt><dd>
Duplicate two topmost stack elements.
</dd><dt><span class="term">
<a id="idp15058820096" class="indexterm"></a>?dup <span class="emphasis"><em>( a — a a? )</em></span> 
</span></dt><dd>
Dup a if a differs from 0.
</dd><dt><span class="term">
<a id="idp15058822848" class="indexterm"></a>nip <span class="emphasis"><em>( a b — b )</em></span> 
</span></dt><dd>
swap drop
</dd><dt><span class="term">
<a id="idp15058825520" class="indexterm"></a>tuck <span class="emphasis"><em>( a b — b a b )</em></span> 
</span></dt><dd>
dup -rot
</dd><dt><span class="term">
<a id="idp15058828192" class="indexterm"></a>pick <span class="emphasis"><em>( x<sub>u</sub> … x<sub>1</sub> x<sub>0</sub> u — x<sub>u</sub> … x<sub>1</sub> x<sub>0</sub> x<sub>u</sub> )</em></span> 
</span></dt><dd>
Pick from stack element with depth u to top of stack.
</dd><dt><span class="term">
<a id="idp15058833680" class="indexterm"></a>&gt;r <span class="emphasis"><em>( a — )</em></span> 
</span></dt><dd>
Move value from top of parameter stack to top of return stack.
</dd><dt><span class="term">
<a id="idp15058836496" class="indexterm"></a>r&gt; <span class="emphasis"><em>( — a )</em></span> 
</span></dt><dd>
Move value from top of return stack to top of parameter stack.
</dd><dt><span class="term">
<a id="idp15058839312" class="indexterm"></a>r@ <span class="emphasis"><em>( — a )</em></span> 
</span></dt><dd>
Copy value from top of return stack to top of parameter stack.
</dd><dt><span class="term">
<a id="idp15058842128" class="indexterm"></a>depth <span class="emphasis"><em>( — n)</em></span> 
</span></dt><dd>
<code class="literal">n</code> is the number of single-cell values contained in the data stack before <code class="literal">n</code> was placed on the stack.
</dd><dt><span class="term">
<a id="idp15058846144" class="indexterm"></a>lsb <span class="emphasis"><em>( — addr)</em></span> 
</span></dt><dd>
The top address of the LSB parameter stack.
</dd><dt><span class="term">
<a id="idp15058848928" class="indexterm"></a>msb <span class="emphasis"><em>( — addr)</em></span> 
</span></dt><dd>
The top address of the MSB parameter stack.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_utility"></a>4.2. Utility</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15058853104" class="indexterm"></a>. <span class="emphasis"><em>( n — )</em></span> 
</span></dt><dd>
Prints top value of stack as signed number.
</dd><dt><span class="term">
<a id="idp15058855888" class="indexterm"></a>u. <span class="emphasis"><em>( u — )</em></span> 
</span></dt><dd>
Prints top value of stack as unsigned number.
</dd><dt><span class="term">
<a id="idp15058858672" class="indexterm"></a>.s 
</span></dt><dd>
See stack contents.
</dd><dt><span class="term">
<a id="idp15058860960" class="indexterm"></a>emit <span class="emphasis"><em>( a — )</em></span> 
</span></dt><dd>
Prints top value of stack as a PETSCII character. Example: <code class="literal">q emit</code>
</dd><dt><span class="term">
<a id="idp15058864336" class="indexterm"></a>£ 
</span></dt><dd>
Comment to end of line. (Used on C64/PETSCII.)
</dd><dt><span class="term">
<a id="idp15058866736" class="indexterm"></a>\ 
</span></dt><dd>
Comment to end of line. (Used when cross-compiling from PC/ASCII.)
</dd><dt><span class="term">
<a id="idp15058869184" class="indexterm"></a>( 
</span></dt><dd>
Multiline comment. Ignores everything until a ).
</dd><dt><span class="term">
<a id="idp15058871584" class="indexterm"></a>bl <span class="emphasis"><em>( — char )</em></span> 
</span></dt><dd>
Gives the PETSCII character for a space.
</dd><dt><span class="term">
<a id="idp15058874352" class="indexterm"></a>space 
</span></dt><dd>
Displays one space.
</dd><dt><span class="term">
<a id="idp15058876640" class="indexterm"></a>spaces <span class="emphasis"><em>( n — )</em></span> 
</span></dt><dd>
Displays n spaces.
</dd><dt><span class="term">
<a id="idp15058879312" class="indexterm"></a>page 
</span></dt><dd>
Clears the screen.
</dd><dt><span class="term">
<a id="idp15058881600" class="indexterm"></a>rvs 
</span></dt><dd>
Reverse screen output.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_mathematics"></a>4.3. Mathematics</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15058885280" class="indexterm"></a>1+ <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Increase top of stack value by 1.
</dd><dt><span class="term">
<a id="idp15058888032" class="indexterm"></a>1- <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Decrease top of stack value by 1.
</dd><dt><span class="term">
<a id="idp15058890784" class="indexterm"></a>2+ <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Increase top of stack value by 2.
</dd><dt><span class="term">
<a id="idp15058893536" class="indexterm"></a>2* <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Multiply top of stack value by 2.
</dd><dt><span class="term">
<a id="idp15058896288" class="indexterm"></a>2/ <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Divide top of stack value by 2.
</dd><dt><span class="term">
<a id="idp15058899040" class="indexterm"></a>100/ <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Divides top of stack value by $100.
</dd><dt><span class="term">
<a id="idp15058901808" class="indexterm"></a>+! <span class="emphasis"><em>( n a — )</em></span> 
</span></dt><dd>
Add n to memory address a.
</dd><dt><span class="term">
<a id="idp15058904560" class="indexterm"></a>+ <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Add a and b.
</dd><dt><span class="term">
<a id="idp15058907232" class="indexterm"></a>- <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Subtract b from a.
</dd><dt><span class="term">
<a id="idp15058909904" class="indexterm"></a>* <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Multiply a with b.
</dd><dt><span class="term">
<a id="idp15058912576" class="indexterm"></a>/ <span class="emphasis"><em>( a b — q )</em></span> 
</span></dt><dd>
Divide a with b using floored division.
</dd><dt><span class="term">
<a id="idp15058915344" class="indexterm"></a>/mod <span class="emphasis"><em>( a b — r q )</em></span> 
</span></dt><dd>
Divide a with b, giving remainder r and quotient q.
</dd><dt><span class="term">
<a id="idp15058918144" class="indexterm"></a>mod <span class="emphasis"><em>( a b — r )</em></span> 
</span></dt><dd>
Remainder of a divided by b.
</dd><dt><span class="term">
<a id="idp15058920896" class="indexterm"></a>*/ <span class="emphasis"><em>( a b c — q )</em></span> 
</span></dt><dd>
Multiply a with b, then divide by c, using a 32-bit intermediary.
</dd><dt><span class="term">
<a id="idp15058923712" class="indexterm"></a>*/mod <span class="emphasis"><em>( a b c — r q )</em></span> 
</span></dt><dd>
Like */, but also keeping remainder r.
</dd><dt><span class="term">
<a id="idp15058926480" class="indexterm"></a>0&lt; <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Is a negative?
</dd><dt><span class="term">
<a id="idp15058929152" class="indexterm"></a>negate <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Negates a.
</dd><dt><span class="term">
<a id="idp15058931824" class="indexterm"></a>abs <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Gives absolute value of a.
</dd><dt><span class="term">
<a id="idp15058934576" class="indexterm"></a>min <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Gives the lesser of a and b.
</dd><dt><span class="term">
<a id="idp15058937328" class="indexterm"></a>max <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Gives the greater of a and b.
</dd><dt><span class="term">
<a id="idp15058940080" class="indexterm"></a>within <span class="emphasis"><em>( n lo hi — flag )</em></span> 
</span></dt><dd>
Returns true if lo ≤ n &lt; hi.
</dd><dt><span class="term">
<a id="idp15058942912" class="indexterm"></a>&lt; <span class="emphasis"><em>( n1 n2 — flag )</em></span> 
</span></dt><dd>
Is n1 less than n2? (Signed.)
</dd><dt><span class="term">
<a id="idp15058945664" class="indexterm"></a>&gt; <span class="emphasis"><em>( n1 n2 — flag )</em></span> 
</span></dt><dd>
Is n1 greater than n2? (Signed.)
</dd><dt><span class="term">
<a id="idp15058948416" class="indexterm"></a>u&lt; <span class="emphasis"><em>( u1 u2 — flag )</em></span> 
</span></dt><dd>
Is u1 less than u2? (Unsigned.)
</dd><dt><span class="term">
<a id="idp15058951168" class="indexterm"></a>u&gt; <span class="emphasis"><em>( u1 u2 — flag )</em></span> 
</span></dt><dd>
Is u1 greater than u2? (Unsigned.)
</dd><dt><span class="term">
<a id="idp15058953936" class="indexterm"></a>lshift <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Binary shift a left by b.
</dd><dt><span class="term">
<a id="idp15058956608" class="indexterm"></a>rshift <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Binary shift a right by b.
</dd><dt><span class="term">
<a id="idp15058959360" class="indexterm"></a>base <span class="emphasis"><em>(variable)</em></span> 
</span></dt><dd>
Points to the cell that holds the numerical base.
</dd><dt><span class="term">
<a id="idp15058962144" class="indexterm"></a>decimal 
</span></dt><dd>
Sets the numerical base to 10.
</dd><dt><span class="term">
<a id="idp15058964512" class="indexterm"></a>hex 
</span></dt><dd>
Sets the numerical base to 16.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_double"></a>4.4. Double</h3></div></div></div><p>The following words use double-cell integers. On the stack, the cell containing the most significant part of a double-cell integer is above the cell containing the least significant part.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15058968864" class="indexterm"></a>dabs <span class="emphasis"><em>( d — ud )</em></span> 
</span></dt><dd>
Produces the absolute value of <span class="emphasis"><em>d</em></span>.
</dd><dt><span class="term">
<a id="idp15058971920" class="indexterm"></a>dnegate <span class="emphasis"><em>( d — d )</em></span> 
</span></dt><dd>
Negates the double-cell integer <span class="emphasis"><em>d</em></span>.
</dd><dt><span class="term">
<a id="idp15058974976" class="indexterm"></a>s&gt;d <span class="emphasis"><em>( n — d )</em></span> 
</span></dt><dd>
Converts the number n to the double-cell number <span class="emphasis"><em>d</em></span>.
</dd><dt><span class="term">
<a id="idp15058978032" class="indexterm"></a>m+ <span class="emphasis"><em>( d n — d )</em></span> 
</span></dt><dd>
Add <span class="emphasis"><em>n</em></span> to double-cell number <span class="emphasis"><em>d</em></span>.
</dd><dt><span class="term">
<a id="idp15058981472" class="indexterm"></a>m* <span class="emphasis"><em>( a b — d )</em></span> 
</span></dt><dd>
Multiply <span class="emphasis"><em>a</em></span> with <span class="emphasis"><em>b</em></span>, producing a double-cell value.
</dd><dt><span class="term">
<a id="idp15058984992" class="indexterm"></a>um* <span class="emphasis"><em>( a b — ud )</em></span> 
</span></dt><dd>
Multiply <span class="emphasis"><em>a</em></span> with <span class="emphasis"><em>b</em></span>, giving the unsigned double-cell number <span class="emphasis"><em>ud</em></span>.
</dd><dt><span class="term">
<a id="idp15058988816" class="indexterm"></a>um/mod <span class="emphasis"><em>( ud n — r q )</em></span> 
</span></dt><dd>
Divide double-cell number ud by n, giving remainder r and quotient q. Values are unsigned.
</dd><dt><span class="term">
<a id="idp15058991696" class="indexterm"></a>fm/mod <span class="emphasis"><em>( d n — r q )</em></span> 
</span></dt><dd>
Divide double-cell number d by n, giving the floored quotient q and the remainder r. Values are signed.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_logic"></a>4.5. Logic</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15058995984" class="indexterm"></a>0= <span class="emphasis"><em>( a — flag)</em></span> 
</span></dt><dd>
Is <span class="emphasis"><em>a</em></span> equal to zero?
</dd><dt><span class="term">
<a id="idp15058999040" class="indexterm"></a>0&lt;&gt; <span class="emphasis"><em>( a — flag )</em></span> 
</span></dt><dd>
Is <span class="emphasis"><em>a</em></span> not equal to 0?
</dd><dt><span class="term">
<a id="idp15059002096" class="indexterm"></a>\= <span class="emphasis"><em>( a b — flag )</em></span> 
</span></dt><dd>
Is <span class="emphasis"><em>a</em></span> equal to <span class="emphasis"><em>b</em></span>?
</dd><dt><span class="term">
<a id="idp15059005536" class="indexterm"></a>&lt;&gt; <span class="emphasis"><em>( a b — flag )</em></span> 
</span></dt><dd>
Does <span class="emphasis"><em>a</em></span> differ from <span class="emphasis"><em>b</em></span>?
</dd><dt><span class="term">
<a id="idp15059008976" class="indexterm"></a>and <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Binary and.
</dd><dt><span class="term">
<a id="idp15059011648" class="indexterm"></a>or <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Binary or.
</dd><dt><span class="term">
<a id="idp15059014320" class="indexterm"></a>xor <span class="emphasis"><em>( a b — c )</em></span> 
</span></dt><dd>
Binary exclusive or.
</dd><dt><span class="term">
<a id="idp15059016992" class="indexterm"></a>invert <span class="emphasis"><em>( a — b )</em></span> 
</span></dt><dd>
Flip all bits of <span class="emphasis"><em>a</em></span>.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_memory"></a>4.6. Memory</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059021440" class="indexterm"></a>! <span class="emphasis"><em>( value address — )</em></span> 
</span></dt><dd>
Store 16-bit value at address.
</dd><dt><span class="term">
<a id="idp15059024192" class="indexterm"></a>@ <span class="emphasis"><em>( address — value )</em></span> 
</span></dt><dd>
Fetch 16-bit value from address.
</dd><dt><span class="term">
<a id="idp15059026944" class="indexterm"></a>c! <span class="emphasis"><em>( value address — )</em></span> 
</span></dt><dd>
Store 8-bit value at address.
</dd><dt><span class="term">
<a id="idp15059029696" class="indexterm"></a>c@ <span class="emphasis"><em>( address — value )</em></span> 
</span></dt><dd>
Fetch 8-bit value from address.
</dd><dt><span class="term">
<a id="idp15059032448" class="indexterm"></a>fill <span class="emphasis"><em>( addr len char — )</em></span> 
</span></dt><dd>
Fill range [addr, len + addr) with char.
</dd><dt><span class="term">
<a id="idp15059035216" class="indexterm"></a>move <span class="emphasis"><em>( src dst len — )</em></span> 
</span></dt><dd>
Copies a region of memory <code class="literal">len</code> bytes long, starting at <code class="literal">src</code>, to memory beginning at <code class="literal">dst</code>.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_compiling"></a>4.7. Compiling</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059041152" class="indexterm"></a>: <span class="emphasis"><em>( "name" — )</em></span> 
</span></dt><dd>
Define the word with the given name and enter compilation state.
</dd><dt><span class="term">
<a id="idp15059043968" class="indexterm"></a>:noname <span class="emphasis"><em>( — xt )</em></span> 
</span></dt><dd>
Create an execution token and enter compilation state.
</dd><dt><span class="term">
<a id="idp15059046768" class="indexterm"></a>; <span class="emphasis"><em>( — )</em></span> 
</span></dt><dd>
End the current definition, allow it to be found in the dictionary and go back to interpretation state.
</dd><dt><span class="term">
<a id="idp15059049664" class="indexterm"></a>code <span class="emphasis"><em>( "name" — )</em></span> 
</span></dt><dd>
Start assembling a new word.
</dd><dt><span class="term">
<a id="idp15059052416" class="indexterm"></a>;code  
</span></dt><dd>
End assembler.
</dd><dt><span class="term">
 <span class="emphasis"><em>( n — )</em></span> 
</span></dt><dd>
Write word on stack to <code class="literal">here</code> position and increase <code class="literal">here</code> by 2.
</dd><dt><span class="term">
<a id="idp15059057872" class="indexterm"></a>c <span class="emphasis"><em>( n — )</em></span> 
</span></dt><dd>
Write byte on stack to <code class="literal">here</code> position and increase <code class="literal">here</code> by 1.
</dd><dt><span class="term">
<a id="idp15059061792" class="indexterm"></a>allot <span class="emphasis"><em>( n — )</em></span> 
</span></dt><dd>
Add <span class="emphasis"><em>n</em></span> bytes to the body of the most recently defined word.
</dd><dt><span class="term">
<a id="idp15059064976" class="indexterm"></a>literal <span class="emphasis"><em>( n — )</em></span> 
</span></dt><dd>
Compile a value from the stack as a literal value. Typical use: <code class="literal">: x ... [ a b * ] literal ... ;</code>
</dd><dt><span class="term">
<a id="idp15059068352" class="indexterm"></a>[char] <span class="emphasis"><em>( "c" — )</em></span> 
</span></dt><dd>
Compile character <span class="emphasis"><em>c</em></span> as a literal value.
</dd><dt><span class="term">
<a id="idp15059071408" class="indexterm"></a>[ <span class="emphasis"><em>( — )</em></span> 
</span></dt><dd>
Leave compile mode. Execute the following words immediately instead of compiling them.
</dd><dt><span class="term">
<a id="idp15059074272" class="indexterm"></a>] <span class="emphasis"><em>( — )</em></span> 
</span></dt><dd>
Return to compile mode.
<a id="idp15059076048" class="indexterm"></a>immediate:: Mark the most recently defined word as immediate (i.e. inside colon definitions, it will be executed immediately instead of compiled).
</dd><dt><span class="term">
<a id="idp15059078000" class="indexterm"></a>['] name <span class="emphasis"><em>( — xt )</em></span>
</span></dt><dd>
Place name’s execution token xt on the stack.
The execution token returned by the compiled phrase <code class="literal">['] x</code> is the same value returned by <code class="literal">' x</code> outside of compilation state.
Typical use: <code class="literal">: x … ['] name … ;</code>
</dd><dt><span class="term">
<a id="idp15059082800" class="indexterm"></a>compile ( xt — ) 
</span></dt><dd>
Append \texttt{jsr xt} to the word being compiled. Typical use: <code class="literal">: recurse immed latest &gt;xt compile, ;</code>
</dd><dt><span class="term">
<a id="idp15059085792" class="indexterm"></a>postpone <span class="emphasis"><em>xxx</em></span> 
</span></dt><dd>
Compile the compilation semantics (instead of interpretation semantics) of xxx. Typical use:
</dd></dl></div><pre class="screen">: endif postpone then ; immediate
: x ... if ... endif ... ;</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059089824" class="indexterm"></a>header <span class="emphasis"><em>( "name" — )</em></span> 
</span></dt><dd>
Create a dictionary header named <span class="emphasis"><em>name</em></span>.
</dd><dt><span class="term">
<a id="idp15059092880" class="indexterm"></a>create <span class="emphasis"><em>( "name" — )</em></span> … does&gt; 
</span></dt><dd>
Create a word-creating word named <span class="emphasis"><em>name</em></span> with custom behavior specified after <code class="literal">does&gt;</code>.  For further description, see "Starting Forth."
</dd><dt><span class="term">
<a id="idp15059096672" class="indexterm"></a>state <span class="emphasis"><em>( — addr)</em></span> 
</span></dt><dd>
<span class="emphasis"><em>addr</em></span> is the address of a cell containing the compilation-state flag. It is 1 when compiling, otherwise 0.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_word_list"></a>4.8. Word List</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059101344" class="indexterm"></a>hide <span class="emphasis"><em>( "name" — )</em></span>
</span></dt><dd>
Remove <span class="emphasis"><em>name</em></span> from the word list, while leaving its definition in place.
</dd><dt><span class="term">
<a id="idp15059104544" class="indexterm"></a>define <span class="emphasis"><em>( "name" — )</em></span>
</span></dt><dd>
Assign <code class="literal">here</code> as the execution token of word <span class="emphasis"><em>name</em></span> and enter the compilation state.
</dd><dt><span class="term">
<a id="idp15059108304" class="indexterm"></a>defcode <span class="emphasis"><em>( "name" — )</em></span>
</span></dt><dd>
Like <code class="literal">define</code>, but starts a <code class="literal">code</code> segment instead.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_variables"></a>4.9. Variables</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_values"></a>Values</h4></div></div></div><p>Values are fast to read, slow to write.
Use values for variables that are rarely changed.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="emphasis"><em>1</em></span> <a id="idp15059115456" class="indexterm"></a>value <span class="emphasis"><em>foo</em></span>
</span></dt><dd>
Create value <span class="emphasis"><em>foo</em></span> and set it to <span class="emphasis"><em>1</em></span>.
</dd><dt><span class="term">
<span class="emphasis"><em>2</em></span> <a id="idp15059119280" class="indexterm"></a>constant <span class="emphasis"><em>bar</em></span>
</span></dt><dd>
Create constant value <span class="emphasis"><em>bar</em></span> and set it to <span class="emphasis"><em>2</em></span>.
</dd><dt><span class="term">
<span class="emphasis"><em>foo</em></span>
</span></dt><dd>
Fetch value of <span class="emphasis"><em>foo</em></span>.
</dd><dt><span class="term">
<span class="emphasis"><em>0</em></span> <a id="idp15059125408" class="indexterm"></a>to <span class="emphasis"><em>foo</em></span>
</span></dt><dd>
Set <span class="emphasis"><em>foo</em></span> to <span class="emphasis"><em>0</em></span>.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_variables_2"></a>Variables</h4></div></div></div><p>Variables are faster to write to than values.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059130624" class="indexterm"></a>variable <span class="emphasis"><em>bar</em></span>
</span></dt><dd>
Define variable <span class="emphasis"><em>bar</em></span>.
</dd><dt><span class="term">
<span class="emphasis"><em>bar</em></span> <a id="idp15059134064" class="indexterm"></a>@
</span></dt><dd>
Fetch value of variable <span class="emphasis"><em>bar</em></span>.
</dd><dt><span class="term">
<span class="emphasis"><em>1 bar</em></span> <a id="idp15059137120" class="indexterm"></a>!
</span></dt><dd>
Set variable <span class="emphasis"><em>bar</em></span> to <span class="emphasis"><em>1</em></span>.
</dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_control_flow"></a>4.10. Control Flow</h3></div></div></div><p>Control functions only work in compile mode, not in interpreter.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059142160" class="indexterm"></a>if … <a id="idp15059142912" class="indexterm"></a>then 
</span></dt><dd>
condition IF true-part THEN rest
</dd><dt><span class="term">
if … <a id="idp15059145280" class="indexterm"></a>else … then 
</span></dt><dd>
condition IF true-part ELSE false-part THEN rest
</dd><dt><span class="term">
<a id="idp15059147680" class="indexterm"></a>do .. <a id="idp15059148432" class="indexterm"></a>loop 
</span></dt><dd>
Start a loop with index and limit. Example:
</dd></dl></div><pre class="screen">: print0to7 8 0 do i . loop ;</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059151840" class="indexterm"></a>do .. <a id="idp15059152592" class="indexterm"></a>+loop 
</span></dt><dd>
Start a loop with a custom increment. Example:
</dd></dl></div><pre class="screen">( prints odd numbers from 1 to n )
: printoddnumbers (n -- ) 1 do i . 2 +loop ;</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059156176" class="indexterm"></a>i, <a id="idp15059156928" class="indexterm"></a>j 
</span></dt><dd>
Variables to be used inside <code class="literal">do</code> .. <code class="literal">loop</code> constructs. <code class="literal">i</code> gives inner loop index, <code class="literal">j</code> gives outer loop index.
</dd><dt><span class="term">
<a id="idp15059161712" class="indexterm"></a>leave 
</span></dt><dd>
Leaves the innermost loop.
</dd><dt><span class="term">
<a id="idp15059164080" class="indexterm"></a>unloop 
</span></dt><dd>
Discards the loop-control parameters. Allows clean <a class="xref" href="ar01s04.html#exit">[exit]</a> from within a loop.
</dd></dl></div><pre class="screen">: x 0 0 do unloop exit loop ;</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059180176" class="indexterm"></a>begin .. <a id="idp15059180928" class="indexterm"></a>again 
</span></dt><dd>
Infinite loop.
</dd><dt><span class="term">
<a id="idp15059183216" class="indexterm"></a>begin .. <a id="idp15059183968" class="indexterm"></a>until 
</span></dt><dd>
BEGIN loop-part condition UNTIL. Loop until condition is true.
</dd><dt><span class="term">
<a id="idp15059186400" class="indexterm"></a>begin .. <a id="idp15059187152" class="indexterm"></a>while .. <a id="idp15059187904" class="indexterm"></a>repeat 
</span></dt><dd>
BEGIN condition WHILE loop-part REPEAT. Repeat loop-part while condition is true.
</dd><dt><span class="term">
<a id="exit"></a> <a id="idp15059191104" class="indexterm"></a>exit 
</span></dt><dd>
Exit function. Typical use: <code class="literal">: X test IF EXIT THEN ... ;</code>
</dd><dt><span class="term">
<a id="idp15059194016" class="indexterm"></a>recurse 
</span></dt><dd>
Jump to the start of the word being compiled.
</dd><dt><span class="term">
<a id="idp15059196416" class="indexterm"></a>case .. <a id="idp15059197168" class="indexterm"></a>endcase, <a id="idp15059197920" class="indexterm"></a>of .. <a id="idp15059198672" class="indexterm"></a>endof 
</span></dt><dd>
Switch statements.
</dd></dl></div><pre class="screen">: tellno ( n -- )
case
1 of ." one" endof
2 of ." two" endof
3 of ." three" endof
     ." other" endcase ;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_input"></a>4.11. Input</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059203120" class="indexterm"></a>key <span class="emphasis"><em>( — c )</em></span> 
</span></dt><dd>
Gets one character from the keyboard.
</dd><dt><span class="term">
<a id="idp15059205888" class="indexterm"></a>key? <span class="emphasis"><em>( — flag )</em></span> 
</span></dt><dd>
Returns true if a character is available for <code class="literal">key</code>.
</dd><dt><span class="term">
<a id="idp15059209184" class="indexterm"></a>getc <span class="emphasis"><em>( — c )</em></span> 
</span></dt><dd>
Consumes the next character from the input buffer and increases <code class="literal">&gt;in</code> by one. If no characters are available, the input buffer is refilled as needed.
</dd><dt><span class="term">
<a id="idp15059212736" class="indexterm"></a>char <span class="emphasis"><em>( — c )</em></span> 
</span></dt><dd>
Parses the next word, delimited by a space, and puts its first character on the stack.
</dd><dt><span class="term">
<a id="idp15059215600" class="indexterm"></a>&gt;in <span class="emphasis"><em>( — addr )</em></span> 
</span></dt><dd>
Gives the address of a cell containing the offset in characters from the start of the input buffer to the start of the parse area.
</dd><dt><span class="term">
<a id="idp15059218560" class="indexterm"></a>refill <span class="emphasis"><em>( — flag )</em></span> 
</span></dt><dd>
Attempts to fill the input buffer from the input source, returning true if successful.
</dd><dt><span class="term">
<a id="idp15059221424" class="indexterm"></a>source <span class="emphasis"><em>( — caddr u )</em></span> 
</span></dt><dd>
Gives the address of, and number of characters in, the input buffer.
</dd><dt><span class="term">
<a id="idp15059224256" class="indexterm"></a>source-id <span class="emphasis"><em>( — n )</em></span> 
</span></dt><dd>
Returns 0 if current input is keyboard, -1 if it is a string from <code class="literal">evaluate</code>, or the current file id.
</dd><dt><span class="term">
<a id="idp15059227632" class="indexterm"></a>word <span class="emphasis"><em>( delim — addr )</em></span> 
</span></dt><dd>
Reads a word from input, using delimiter <span class="emphasis"><em>delim</em></span>, and puts the string address on the stack. If the delimiter is the space character, non-breaking space (hex a0) will also be treated as a delimiter.
</dd><dt><span class="term">
<a id="idp15059231008" class="indexterm"></a>parse-name <span class="emphasis"><em>( name — caddr u )</em></span> 
</span></dt><dd>
Reads a word from input, delimited by whitespace. Skips leading spaces.
</dd><dt><span class="term">
<a id="idp15059233920" class="indexterm"></a>interpret <span class="emphasis"><em>( — value )</em></span> 
</span></dt><dd>
Interprets a word from input and puts it on the stack.
</dd><dt><span class="term">
<a id="idp15059236720" class="indexterm"></a>accept <span class="emphasis"><em>( addr u — u )</em></span> 
</span></dt><dd>
Receive a string of at most u characters into the buffer that starts at addr. Returns how many characters were received.
</dd><dt><span class="term">
<a id="idp15059239648" class="indexterm"></a>evaluate <span class="emphasis"><em>( addr len — )</em></span> 
</span></dt><dd>
Evaluate the given string.
</dd><dt><span class="term">
<a id="idp15059242400" class="indexterm"></a>abort 
</span></dt><dd>
Empties the data stack and performs <code class="literal">quit</code>.
</dd><dt><span class="term">
<a id="idp15059245312" class="indexterm"></a>abort" <span class="emphasis"><em>ccc" ( f — )</em></span>  
</span></dt><dd>
If <span class="emphasis"><em>f</em></span> is true, print <span class="emphasis"><em>ccc</em></span> and <code class="literal">abort</code>. Typical use: <code class="literal">: x ... test abort" error" ... ;</code>
</dd><dt><span class="term">
<a id="idp15059250000" class="indexterm"></a>quit 
</span></dt><dd>
Enters an endless loop where DurexForth interprets Forth commands from the keyboard. The word is named "quit" since it can be used to quit a program. It also does cleanup tasks like resetting I/O.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_strings"></a>4.12. Strings</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059254096" class="indexterm"></a>.( 
</span></dt><dd>
Print a string. Example: <code class="literal">.( foo)</code>
</dd><dt><span class="term">
<a id="idp15059257008" class="indexterm"></a>." 
</span></dt><dd>
Compile-time version of <code class="literal">.(</code>. Example: <code class="literal">: foo ." bar" ;</code>
</dd><dt><span class="term">
<a id="idp15059260544" class="indexterm"></a>s" <span class="emphasis"><em>( — caddr u )</em></span> 
</span></dt><dd>
Define a string. Compile-time only! Example: <code class="literal">s" foo"</code>.
</dd><dt><span class="term">
<a id="idp15059263840" class="indexterm"></a>count <span class="emphasis"><em>( str — caddr u )</em></span> 
</span></dt><dd>
Returns data address and length of the counted string <span class="emphasis"><em>str</em></span>.
</dd><dt><span class="term">
<a id="idp15059266896" class="indexterm"></a>type <span class="emphasis"><em>( caddr u — )</em></span> 
</span></dt><dd>
Prints a string.
</dd><dt><span class="term">
<a id="idp15059269568" class="indexterm"></a>/string <span class="emphasis"><em>( caddr u n — caddr+n u-n )</em></span> 
</span></dt><dd>
Adjusts the string by <span class="emphasis"><em>n</em></span> characters.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_number_formatting"></a>4.13. Number Formatting</h3></div></div></div><p>For more info about number formatting, read Starting Forth.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059274576" class="indexterm"></a>&lt;# 
</span></dt><dd>
Begins the number conversion process.
</dd><dt><span class="term">
<a id="idp15059276960" class="indexterm"></a># <span class="emphasis"><em>( ud — ud )</em></span> 
</span></dt><dd>
Converts one digit and puts it in the start of the output string.
</dd><dt><span class="term">
<a id="idp15059279776" class="indexterm"></a>#s <span class="emphasis"><em>( ud — ud )</em></span> 
</span></dt><dd>
Calls <code class="literal">#</code> and repeats until <span class="emphasis"><em>ud</em></span> is zero.
</dd><dt><span class="term">
<a id="idp15059283456" class="indexterm"></a>hold <span class="emphasis"><em>( ch — )</em></span> 
</span></dt><dd>
Inserts the character <code class="literal">ch</code> at the start of the output string.
</dd><dt><span class="term">
<a id="idp15059286848" class="indexterm"></a>sign <span class="emphasis"><em>( a — )</em></span> 
</span></dt><dd>
If <span class="emphasis"><em>a</em></span> is negative, inserts a minus sign at the start of the output string.
</dd><dt><span class="term">
<a id="idp15059290064" class="indexterm"></a>#&gt; <span class="emphasis"><em>( xd — addr u )</em></span> 
</span></dt><dd>
Drops <span class="emphasis"><em>xd</em></span> and returns the output string.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_vectored_execution"></a>4.14. Vectored Execution</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059294592" class="indexterm"></a>' <span class="emphasis"><em>( "name" — addr )</em></span> 
</span></dt><dd>
Find execution token of the word named <span class="emphasis"><em>name</em></span>.
</dd><dt><span class="term">
<a id="idp15059297648" class="indexterm"></a>find <span class="emphasis"><em>( cstr — cstr 0 | xt -1 | xt 1 )</em></span> 
</span></dt><dd>
Find the definition named in the counted string <span class="emphasis"><em>cstr</em></span>.
If the definition is not found, return <span class="emphasis"><em>cstr</em></span> and 0, otherwise return the execution token.
If the definition is immediate, also return 1, otherwise also return -1.
</dd><dt><span class="term">
<a id="idp15059301536" class="indexterm"></a>find-name <span class="emphasis"><em>( caddr u — 0 | nt )</em></span> 
</span></dt><dd>
Get the name token (dictionary pointer) of the word named by <span class="emphasis"><em>caddr u</em></span>, or 0 if the word is not found.
</dd><dt><span class="term">
<a id="idp15059304832" class="indexterm"></a>execute <span class="emphasis"><em>( xt — )</em></span> 
</span></dt><dd>
Execute the execution token <span class="emphasis"><em>xt</em></span>.
</dd><dt><span class="term">
<a id="idp15059307888" class="indexterm"></a>&gt;xt <span class="emphasis"><em>( addr — xt )</em></span> 
</span></dt><dd>
Get execution token of word at adress <span class="emphasis"><em>addr</em></span>.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_debugging"></a>4.15. Debugging</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="idp15059312336" class="indexterm"></a>words 
</span></dt><dd>
List all defined words.
</dd><dt><span class="term">
<a id="idp15059314624" class="indexterm"></a>size <span class="emphasis"><em>( "name" — )</em></span> 
</span></dt><dd>
</dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ar01s03.html"><img src="images/icons/prev.png" alt="Prev" /></a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ar01s05.html"><img src="images/icons/next.png" alt="Next" /></a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/icons/home.png" alt="Home" /></a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>